## 题目要求：
### 一、任务

设计并制作一个铅笔姿态及笔迹检测装置，装置由铅笔、A4 纸、传感器和

显示器组成。用手操作铅笔时，铅笔的姿态、绘出的线段、书写的数字及线段长

度等信息可以通过显示器显示。装置的组成及结构如图 1 所示。![[db216ab961ecced220a7b74c8597993.png]]


### 二、要求

1．基本要求

（1）装置能够检测出铅笔处于竖立状态或放倒状态，并通过显示器显示。

（10 分）

（2）装置能够检测出笔杆与 A4 纸面之间倾角大小的变化趋势，并通过显

示器显示。（20 分）

（3）借助三角板，手握铅笔在 A4 纸面上绘制一条平行于坐标轴的线段，

装置能够识别出线段与 x 轴平行或与 y 轴平行，并通过显示器显示。（20 分）

2．发挥部分

（1）手握铅笔在 A4 纸面上书写 1 位数字（字形参考图 2，字的大小不限），

装置能够在显示器上显示书写的数字。（20 分）![[fb1a8868b7d3050715a4db3118a360e.png]]
（2）借助直尺，手握铅笔在 A4 纸面上随机绘制一条直线线段（长度在 50mm

~ 150mm 范围内），装置能够测量出直线线段的长度，并通过显示器显示，要求

误差≦2mm。（25 分）

（3）其他（传感器采用无线传输形式等）。（5 分）

### 三、说明

1．图 1 中屏显格式仅供参考，实际使用格式可自定。

2．发挥部分书写和画线操作时，要求笔杆与纸面有 40˚ ~ 70˚的倾角。

3．发挥部分（2）的误差超出要求时，随误差增大按比例扣分。

4．测试过程由参赛学生操作，每项测试要求在 20s 内完成。

## 一、系统方案
#### 1.1 处理器选择
ESP32方案
#### 1.2 模块选择
MPU6050陀螺仪，淘金池串口显示
#### 1.3 通信选择
ESP32自带的无线传输
## 二、解题方案
#### 问题一：
直接使用ESP32MPU6050库读取角度，设定大于某个角度是竖直，小于某个角度是放平。
#### 问题二：
读取xy轴两个角度，竖直初始化角度是0度，使笔倾斜，在串口屏上显示变大变小，或具体数值变化。
#### 问题三：
##### 方案一：
读取xy轴加速度，通过判断xy轴加速度的变化大小来判断笔向哪个方向移动。缺点：加速度变化大，不稳定，移动的过程会有其他方向的变化导致xy轴同时变化。
##### 方案二：
读取xy轴角度变化，划线时使笔由竖直到倾斜到竖直判定为一个过程，判断xy轴来识别。未践行，待验证。
#### 问题四：
##### 方案一：
读取加速度，通过判断向某个方向移动到停止的过程来判断横竖，然后将笔画顺序存放与设定的顺序进行比较来识别数字。
##### 方案二：
读取角度，通过识别竖直-倾斜到某角度下-竖直来判定为一笔。同理方案一。
#### 问题五：
没写，加速度积分积分。

## 三、测试结果
#### 问题一：能
#### 问题二：能
#### 问题三：显示不行
#### 问题四：不能
#### 问题五：不能
## 四、总结
写代码能力不够，在字符串整理、发送、显示上浪费大量时间，对第三问的答案处理不行，没有放置结束标识，使他一直跳动。第四问使用加速度处理不好的时候，没考虑其他方向，也没有有效地处理加速度。